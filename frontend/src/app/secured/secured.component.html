<div *ngIf="user; else annonymous">
    <header id="header" class="header fixed-top d-flex align-items-center">
      
      <div class="d-flex align-items-center justify-content-between">
        <img src="assets/img/rgp-logo.png" alt="" width="50px">
        <a href="index.html" class="logo d-flex align-items-center">
          <span class="d-none d-lg-block">RGP</span>
        </a>
        <!-- <i class="bi bi-list toggle-sidebar-btn"></i> -->
      </div><!-- End Logo -->
    
      <!-- <div class="search-bar">
        <form class="search-form d-flex align-items-center" method="POST" action="#">
          <input type="text" name="query" placeholder="Search" title="Enter search keyword">
          <button type="submit" title="Search"><i class="bi bi-search"></i></button>
        </form>
      </div> -->
      <!-- End Search Bar -->
    
      <nav class="header-nav ms-auto">
        <ul class="d-flex align-items-center">
    
        
          <li class="nav-item dropdown pe-3">
    
            <a class="nav-link nav-profile d-flex align-items-center pe-0" href="javascript:void(0)" data-bs-toggle="dropdown">
              <img src="assets/img/profile-img.jpg" alt="Profile" class="rounded-circle">
              <span class="d-none d-md-block dropdown-toggle ps-2">{{user.fullname}}</span>
            </a><!-- End Profile Iamge Icon -->
    <!-- End Profile Dropdown Items -->
          </li><!-- End Profile Nav -->
    
        </ul>
      </nav><!-- End Icons Navigation -->
    
    </header><!-- End Header -->
    
  
  <aside id="sidebar" class="sidebar">

      <ul class="sidebar-nav" id="sidebar-nav">

        <!-- DASHBOARD -->
        <li class="nav-item" *isNavAuth>
          <a class="nav-link" routerLink="dashboard">
            <i class="bi bi-grid"></i>
            <span>Dashboard</span>
          </a>
        </li>

        <!-- OPERATIONS GROUP -->
        <li class="nav-heading">OPERATIONS</li>
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#operationsMenu" href="javascript:void(0)">
            <i class="bi bi-cart"></i>
            <span>Operations</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="operationsMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a [routerLink]="['/secure/sales']" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Sales & POS</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['/secure/purchases']" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Purchases</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['/secure/products']" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Products & Inventory</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['/secure/reports']" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Reports</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- STAKEHOLDERS GROUP -->
        <li class="nav-heading">STAKEHOLDERS</li>
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#stakeholdersMenu" href="javascript:void(0)">
            <i class="bi bi-people"></i>
            <span>Stakeholders</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="stakeholdersMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a [routerLink]="['customers/cust/list']" *isAuth="'customers.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Customers</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['vendors']" *isAuth="'vendors.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Vendors</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['products']" *isNavAuth style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Products & Catalog</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- STORE MANAGEMENT GROUP -->
        <li class="nav-heading">STORE MANAGEMENT</li>
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#storeMenu" href="javascript:void(0)">
            <i class="bi bi-shop"></i>
            <span>Store Management</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="storeMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a [routerLink]="['store']" *isAuth="'store.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Store Operations</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['store/cash']" *isAuth="'cash.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Cash & Payments</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['documents']" *isAuth="'documents.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Documents</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- HUMAN RESOURCES GROUP -->
        <li class="nav-heading">HUMAN RESOURCES</li>
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#hrMenu" href="javascript:void(0)">
            <i class="bi bi-person-badge"></i>
            <span>Human Resources</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="hrMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a [routerLink]="['hr/dashboard']" *isAuth="'hr.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>HR Dashboard</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['hr/attendance']" *isAuth="'attendance.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Attendance & Time</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['hr/leave']" *isAuth="'leave.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Leave Management</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['hr/shifts']" *isAuth="'shifts.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Shift Scheduling</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['hr/shift-assignments']" *isAuth="'shifts.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Shift Assignments</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['hr/performance']" *isAuth="'performance.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Performance & KPI</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- FINANCE & PAYROLL GROUP -->
        <li class="nav-heading">FINANCE & PAYROLL</li>
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#financeMenu" href="javascript:void(0)">
            <i class="bi bi-cash-stack"></i>
            <span>Finance & Payroll</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="financeMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a [routerLink]="['payroll']" *isAuth="'payroll.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Payroll Runs</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['payroll/salary-structures']" *isAuth="'payroll.manage'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Salary Structures</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['finance/reports']" *isAuth="'finance.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Financial Reports</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['finance/gst']" *isAuth="'gst.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>GST & Tax Management</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- REPORTS & ANALYTICS GROUP -->
        <li class="nav-heading">REPORTS & ANALYTICS</li>
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#reportsMenu" href="javascript:void(0)">
            <i class="bi bi-graph-up"></i>
            <span>Reports & Analytics</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="reportsMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a [routerLink]="['reports/sales']" *isAuth="'reports.sales'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Sales Reports</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['reports/inventory']" *isAuth="'reports.inventory'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Inventory Reports</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['reports/financial']" *isAuth="'reports.financial'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Financial Reports</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['reports/hr']" *isAuth="'reports.hr'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>HR Reports</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['reports']" *isAuth="'reports.custom'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>All Reports</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- ADMINISTRATION GROUP -->
        <li class="nav-heading">ADMINISTRATION</li>
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#adminMenu" href="javascript:void(0)">
            <i class="bi bi-gear"></i>
            <span>Administration</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="adminMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a [routerLink]="['settings/users']" *isAuth="'users.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Users & Roles</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['settings/roles']" *isAuth="'roles.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Permissions</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['settings/business']" *isAuth="'settings.manage'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>Business Settings</span>
              </a>
            </li>
            <li>
              <a [routerLink]="['settings']" *isAuth="'settings.read'" style="cursor: pointer;">
                <i class="bi bi-circle"></i><span>System Configuration</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- TOOLS GROUP -->
        <li class="nav-heading">TOOLS</li>
        <li class="nav-item">
          <a class="nav-link collapsed" (click)="openPricing()">
            <i class="bi bi-calculator"></i>
            <span>Pricing Calculator</span>
          </a>
        </li>

        <!-- LOGOUT -->
        <li class="nav-item mt-4">
          <a class="nav-link collapsed" routerLink="/logout">
            <i class="bi bi-box-arrow-right"></i>
            <span>Logout</span>
          </a>
        </li>

      </ul>

    </aside><!-- End Sidebar-->
  
  <main id="main" class="main">
      <!-- <div class="pagetitle">
        <h1>{{(state$ | async)!.title}}</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item active">Dashboard</li>
          </ol>
        </nav>
      </div> -->
      <section class="section">
          <div class="row">
              <div class="col-12">
                  <router-outlet></router-outlet>
              </div>
          </div>
      </section>
    </main>    
  </div>
  
  <ng-template #annonymous>
    <router-outlet></router-outlet>
  </ng-template>        
  
  <!-- <p-dialog header="Profile" [modal]="true" [(visible)]="showUserPopup" [style]="{ width: '25rem' }">
    <app-webcam-snapshot></app-webcam-snapshot>
  </p-dialog> -->
  <p-dialog [header]="'Price'" 
        [(visible)]="pricing" [modal]="true">
    <app-price-estimator></app-price-estimator>
</p-dialog>