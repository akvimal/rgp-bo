<div *ngIf="user; else annonymous">
    <header id="header" class="header fixed-top d-flex align-items-center">
      
      <div class="d-flex align-items-center justify-content-between">
        <img src="assets/img/rgp-logo.png" alt="" width="50px">
        <a href="index.html" class="logo d-flex align-items-center">
          <span class="d-none d-lg-block">RGP</span>
        </a>
        <!-- <i class="bi bi-list toggle-sidebar-btn"></i> -->
      </div><!-- End Logo -->
    
      <!-- <div class="search-bar">
        <form class="search-form d-flex align-items-center" method="POST" action="#">
          <input type="text" name="query" placeholder="Search" title="Enter search keyword">
          <button type="submit" title="Search"><i class="bi bi-search"></i></button>
        </form>
      </div> -->
      <!-- End Search Bar -->
    
      <nav class="header-nav ms-auto">
        <ul class="d-flex align-items-center">
    
        
          <li class="nav-item dropdown pe-3">
    
            <a class="nav-link nav-profile d-flex align-items-center pe-0" href="javascript:void(0)" data-bs-toggle="dropdown">
              <img src="assets/img/profile-img.jpg" alt="Profile" class="rounded-circle">
              <span class="d-none d-md-block dropdown-toggle ps-2">{{user.fullname}}</span>
            </a><!-- End Profile Iamge Icon -->
    <!-- End Profile Dropdown Items -->
          </li><!-- End Profile Nav -->
    
        </ul>
      </nav><!-- End Icons Navigation -->
    
    </header><!-- End Header -->
    
  
  <aside id="sidebar" class="sidebar">

      <ul class="sidebar-nav" id="sidebar-nav">

        <!-- DASHBOARD -->
        <li class="nav-item" *isNavAuth>
          <a class="nav-link" routerLink="dashboard">
            <i class="bi bi-grid"></i>
            <span>Dashboard</span>
          </a>
        </li>

        <!-- OPERATIONS GROUP -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#operationsMenu" href="javascript:void(0)">
            <i class="bi bi-cart"></i>
            <span>Operations</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="operationsMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li *isNavAuth>
              <a routerLink="sales">
                <i class="bi bi-circle"></i><span>Sales & POS</span>
              </a>
            </li>
            <li *isAuth="'purchases.read'">
              <a routerLink="purchases">
                <i class="bi bi-circle"></i><span>Purchases</span>
              </a>
            </li>
            <li *isNavAuth>
              <a routerLink="products">
                <i class="bi bi-circle"></i><span>Products & Catalog</span>
              </a>
            </li>
            <li *isAuth="'returns.read'">
              <a routerLink="returns">
                <i class="bi bi-circle"></i><span>Returns & Exchanges</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- STAKEHOLDERS GROUP -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#stakeholdersMenu" href="javascript:void(0)">
            <i class="bi bi-people"></i>
            <span>Stakeholders</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="stakeholdersMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li *isAuth="'customers.read'">
              <a routerLink="customers/cust/list">
                <i class="bi bi-circle"></i><span>Customers</span>
              </a>
            </li>
            <li *isAuth="'vendors.read'">
              <a routerLink="vendors">
                <i class="bi bi-circle"></i><span>Vendors</span>
              </a>
            </li>
            <li *isNavAuth>
              <a routerLink="products">
                <i class="bi bi-circle"></i><span>Products & Catalog</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- STORE MANAGEMENT GROUP -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#storeMenu" href="javascript:void(0)">
            <i class="bi bi-shop"></i>
            <span>Store Management</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="storeMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li *isAuth="'store.read'">
              <a routerLink="store">
                <i class="bi bi-circle"></i><span>Store Operations</span>
              </a>
            </li>
            <li *isAuth="'cash.read'">
              <a routerLink="store/cash">
                <i class="bi bi-circle"></i><span>Cash & Payments</span>
              </a>
            </li>
            <li *isAuth="'documents.read'">
              <a routerLink="documents">
                <i class="bi bi-circle"></i><span>Documents</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- HUMAN RESOURCES GROUP -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#hrMenu" href="javascript:void(0)">
            <i class="bi bi-person-badge"></i>
            <span>Human Resources</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="hrMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li *isAuth="'hr.read'">
              <a routerLink="hr/dashboard">
                <i class="bi bi-circle"></i><span>HR Dashboard</span>
              </a>
            </li>
            <li *isAuth="'attendance.read'">
              <a routerLink="hr/attendance">
                <i class="bi bi-circle"></i><span>Attendance & Time</span>
              </a>
            </li>
            <li *isAuth="'leave.read'">
              <a routerLink="hr/leave">
                <i class="bi bi-circle"></i><span>Leave Management</span>
              </a>
            </li>
            <li *isAuth="'shifts.read'">
              <a routerLink="hr/shifts">
                <i class="bi bi-circle"></i><span>Shift Scheduling</span>
              </a>
            </li>
            <li *isAuth="'shifts.read'">
              <a routerLink="hr/shift-assignments">
                <i class="bi bi-circle"></i><span>Shift Assignments</span>
              </a>
            </li>
            <li *isAuth="'performance.read'">
              <a routerLink="hr/performance">
                <i class="bi bi-circle"></i><span>Performance & KPI</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- FINANCE & PAYROLL GROUP -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#financeMenu" href="javascript:void(0)">
            <i class="bi bi-cash-stack"></i>
            <span>Finance & Payroll</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="financeMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li *isAuth="'payroll.read'">
              <a routerLink="payroll">
                <i class="bi bi-circle"></i><span>Payroll Runs</span>
              </a>
            </li>
            <li *isAuth="'payroll.manage'">
              <a routerLink="payroll/salary-structures">
                <i class="bi bi-circle"></i><span>Salary Structures</span>
              </a>
            </li>
            <li *isAuth="'finance.read'">
              <a routerLink="finance/reports">
                <i class="bi bi-circle"></i><span>Financial Reports</span>
              </a>
            </li>
            <li *isAuth="'gst.read'">
              <a routerLink="finance/gst">
                <i class="bi bi-circle"></i><span>GST & Tax Management</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- REPORTS & ANALYTICS GROUP -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#reportsMenu" href="javascript:void(0)">
            <i class="bi bi-graph-up"></i>
            <span>Reports & Analytics</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="reportsMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li *isAuth="'reports.sales'">
              <a routerLink="reports/sales">
                <i class="bi bi-circle"></i><span>Sales Reports</span>
              </a>
            </li>
            <li *isAuth="'reports.inventory'">
              <a routerLink="reports/inventory">
                <i class="bi bi-circle"></i><span>Inventory Reports</span>
              </a>
            </li>
            <li *isAuth="'reports.financial'">
              <a routerLink="reports/financial">
                <i class="bi bi-circle"></i><span>Financial Reports</span>
              </a>
            </li>
            <li *isAuth="'reports.hr'">
              <a routerLink="reports/hr">
                <i class="bi bi-circle"></i><span>HR Reports</span>
              </a>
            </li>
            <li>
              <a routerLink="reports">
                <i class="bi bi-circle"></i><span>All Reports</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- ADMINISTRATION GROUP -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#adminMenu" href="javascript:void(0)">
            <i class="bi bi-gear"></i>
            <span>Administration</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul id="adminMenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li *isAuth="'users.read'">
              <a routerLink="settings/users">
                <i class="bi bi-circle"></i><span>Users & Roles</span>
              </a>
            </li>
            <li *isAuth="'roles.read'">
              <a routerLink="settings/roles">
                <i class="bi bi-circle"></i><span>Permissions</span>
              </a>
            </li>
            <li *isAuth="'settings.manage'">
              <a routerLink="settings/business">
                <i class="bi bi-circle"></i><span>Business Settings</span>
              </a>
            </li>
            <li *isAuth="'settings.read'">
              <a routerLink="settings">
                <i class="bi bi-circle"></i><span>System Configuration</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- TOOLS GROUP -->
        <li class="nav-item">
          <a class="nav-link collapsed" (click)="openPricing()">
            <i class="bi bi-calculator"></i>
            <span>Pricing Calculator</span>
          </a>
        </li>

        <!-- LOGOUT -->
        <li class="nav-item mt-4">
          <a class="nav-link collapsed" routerLink="/logout">
            <i class="bi bi-box-arrow-right"></i>
            <span>Logout</span>
          </a>
        </li>

      </ul>

    </aside><!-- End Sidebar-->
  
  <main id="main" class="main">
      <!-- <div class="pagetitle">
        <h1>{{(state$ | async)!.title}}</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item active">Dashboard</li>
          </ol>
        </nav>
      </div> -->
      <section class="section">
          <div class="row">
              <div class="col-12">
                  <router-outlet></router-outlet>
              </div>
          </div>
      </section>
    </main>    
  </div>
  
  <ng-template #annonymous>
    <router-outlet></router-outlet>
  </ng-template>        
  
  <!-- <p-dialog header="Profile" [modal]="true" [(visible)]="showUserPopup" [style]="{ width: '25rem' }">
    <app-webcam-snapshot></app-webcam-snapshot>
  </p-dialog> -->
  <p-dialog [header]="'Price'" 
        [(visible)]="pricing" [modal]="true">
    <app-price-estimator></app-price-estimator>
</p-dialog>