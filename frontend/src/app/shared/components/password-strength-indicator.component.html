<div class="password-strength-indicator" *ngIf="password">
  <!-- Strength Meter -->
  <div class="strength-meter mb-2">
    <div class="strength-meter-bar">
      <div
        class="strength-meter-fill"
        [ngClass]="getStrengthClass()"
        [style.width.%]="getStrengthPercentage()">
      </div>
    </div>
    <small class="strength-text" [ngClass]="getStrengthClass()">
      {{ getStrengthText() }}
    </small>
  </div>

  <!-- Requirements Checklist -->
  <div class="password-requirements" *ngIf="showRequirements">
    <p class="text-muted mb-2"><small><strong>Password Requirements:</strong></small></p>
    <ul class="requirements-list">
      <li [ngClass]="validation.checks.minLength ? 'requirement-met' : 'requirement-unmet'">
        <i class="bi" [ngClass]="validation.checks.minLength ? 'bi-check-circle-fill text-success' : 'bi-circle text-muted'"></i>
        <span>At least 8 characters</span>
      </li>
      <li [ngClass]="validation.checks.hasUppercase ? 'requirement-met' : 'requirement-unmet'">
        <i class="bi" [ngClass]="validation.checks.hasUppercase ? 'bi-check-circle-fill text-success' : 'bi-circle text-muted'"></i>
        <span>One uppercase letter (A-Z)</span>
      </li>
      <li [ngClass]="validation.checks.hasLowercase ? 'requirement-met' : 'requirement-unmet'">
        <i class="bi" [ngClass]="validation.checks.hasLowercase ? 'bi-check-circle-fill text-success' : 'bi-circle text-muted'"></i>
        <span>One lowercase letter (a-z)</span>
      </li>
      <li [ngClass]="validation.checks.hasNumber ? 'requirement-met' : 'requirement-unmet'">
        <i class="bi" [ngClass]="validation.checks.hasNumber ? 'bi-check-circle-fill text-success' : 'bi-circle text-muted'"></i>
        <span>One number (0-9)</span>
      </li>
      <li [ngClass]="validation.checks.hasSpecialChar ? 'requirement-met' : 'requirement-unmet'">
        <i class="bi" [ngClass]="validation.checks.hasSpecialChar ? 'bi-check-circle-fill text-success' : 'bi-circle text-muted'"></i>
        <span>One special character (!@#$%^&*...)</span>
      </li>
    </ul>
  </div>

  <!-- Validation Errors (Alternative to checklist) -->
  <div class="alert alert-danger mt-2" *ngIf="!showRequirements && !validation.isValid && validation.errors.length > 0">
    <small>
      <strong>Password requirements not met:</strong>
      <ul class="mb-0 mt-1">
        <li *ngFor="let error of validation.errors">{{ error }}</li>
      </ul>
    </small>
  </div>
</div>
